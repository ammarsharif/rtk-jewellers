<!DOCTYPE html>
<html lang="ur">
<head>
    <meta charset="UTF-8">
    <title>RTK JEWL ART â€” Billing System</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#0f0e17" id="themeColorMeta">
    <meta name="description" content="RTK JEWL ART â€” Professional Jewelry Billing System, Sadiq Abad">
    <link rel="manifest" href="data:application/manifest+json;base64,ewogICJuYW1lIjogIlJUSyBKRVdMIEFSVCIsCiAgInNob3J0X25hbWUiOiAiUlRLIEpld2VsIiwKICAic3RhcnRfdXJsIjogIi4iLAogICJkaXNwbGF5IjogInN0YW5kYWxvbmUiLAogICJiYWNrZ3JvdW5kX2NvbG9yIjogIiMwZjBlMTciLAogICJ0aGVtZV9jb2xvciI6ICIjMGYwZTE3Igp9">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Nastaliq+Urdu:wght@400;700&family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">

<style>
/* ============================================================
   DESIGN TOKENS  â€”  Shared (always)
   ============================================================ */
:root {
    --gold:         #C9963A;
    --gold-light:   #F2C96B;
    --gold-pale:    #F9E9B8;
    --gold-dark:    #8A6218;
    --gold-glow:    rgba(201,150,58,.22);
    --silver:       #AAB8C8;
    --silver-light: #D6E4F0;
    --r-sm:  8px;
    --r-md:  14px;
    --r-lg:  22px;
    --r-xl:  30px;
    --ease:  cubic-bezier(.4,0,.2,1);
}

/* â”€â”€ DARK THEME (default) â”€â”€ */
[data-theme="dark"] {
    --bg:           #0b0b14;
    --bg-card:      #131320;
    --bg-surface:   #1b1b2e;
    --bg-input:     #12121f;
    --bg-topbar:    rgba(11,11,20,.88);
    --border:       rgba(201,150,58,.2);
    --border-soft:  rgba(255,255,255,.07);
    --txt:          #EEF0F5;
    --txt-muted:    #7A85A0;
    --txt-gold:     #C9963A;
    --sh-gold:      0 4px 28px rgba(201,150,58,.22);
    --sh-card:      0 10px 40px rgba(0,0,0,.55);
    --body-grad1:   rgba(201,150,58,.11);
    --body-grad2:   rgba(100,80,200,.07);
    --rinput-focus: rgba(201,150,58,.08);
    --net-val-color:    #7FD49A;
    --divider-line: rgba(255,255,255,.07);
    --totalurdu-border: rgba(255,255,255,.06);
    --tbl-row-border:   rgba(255,255,255,.04);
    --theme-icon: "ğŸŒ™";
}

/* â”€â”€ LIGHT THEME â”€â”€ */
[data-theme="light"] {
    --bg:           #F5F3EE;
    --bg-card:      #FFFFFF;
    --bg-surface:   #F0EDE6;
    --bg-input:     #FAF8F4;
    --bg-topbar:    rgba(255,252,245,.92);
    --border:       rgba(180,130,40,.3);
    --border-soft:  rgba(0,0,0,.09);
    --txt:          #1A1610;
    --txt-muted:    #7A6E58;
    --txt-gold:     #A07420;
    --sh-gold:      0 4px 28px rgba(180,130,40,.18);
    --sh-card:      0 8px 32px rgba(0,0,0,.08);
    --body-grad1:   rgba(201,150,58,.07);
    --body-grad2:   rgba(120,100,230,.04);
    --rinput-focus: rgba(201,150,58,.06);
    --net-val-color:    #2A8A50;
    --divider-line: rgba(0,0,0,.09);
    --totalurdu-border: rgba(0,0,0,.08);
    --tbl-row-border:   rgba(0,0,0,.05);
    --theme-icon: "â˜€ï¸";
}

/* ============================================================
   RESET
   ============================================================ */
*,*::before,*::after{box-sizing:border-box;-webkit-tap-highlight-color:transparent;-webkit-user-select:none;user-select:none;}
input,textarea,select,span[id]{-webkit-user-select:text;user-select:text;}

/* ============================================================
   BODY / SHELL
   ============================================================ */
/* â”€â”€ Smooth theme transitions â”€â”€ */
html {
    transition: color-scheme .35s;
}
*, *::before, *::after {
    transition-property: background, background-color, border-color, color, box-shadow;
    transition-duration: .28s;
    transition-timing-function: var(--ease);
}
/* But don't kill pre-existing transitions on interactive elements */
.btn, .mbtn, .card, .finput, .tmr-box, .cam-sub-btn {
    transition: all .22s var(--ease);
}

body{
    margin:0;padding:0;min-height:100vh;
    font-family:'Inter',sans-serif;
    background:var(--bg);
    color:var(--txt);
    background-image:
        radial-gradient(ellipse 70% 55% at 50% -5%, var(--body-grad1) 0%, transparent 65%),
        radial-gradient(ellipse 40% 30% at 90% 95%, var(--body-grad2) 0%, transparent 60%);
}
.app{display:flex;flex-direction:column;min-height:100vh;}

/* ============================================================
   TOP BAR
   ============================================================ */
.topbar{
    position:sticky;top:0;z-index:200;
    background:var(--bg-topbar);
    backdrop-filter:blur(18px);-webkit-backdrop-filter:blur(18px);
    border-bottom:1px solid var(--border);
    padding:11px 20px;
    display:flex;align-items:center;justify-content:space-between;gap:12px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   THEME TOGGLE  â€”  Premium Pill Switch
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.theme-toggle-wrap{
    display:flex;align-items:center;gap:8px;flex-shrink:0;
}

/* The track */
.theme-toggle{
    position:relative;
    width:72px;height:32px;
    border-radius:50px;
    border:none;outline:none;
    cursor:pointer;padding:0;
    flex-shrink:0;
    /* Dark-mode track: deep midnight blue */
    background:linear-gradient(135deg,#1a1a3e 0%,#0d1b4b 100%);
    box-shadow:
        inset 0 2px 6px rgba(0,0,0,.4),
        0 0 0 1.5px rgba(201,150,58,.25);
    transition: background .4s var(--ease), box-shadow .3s var(--ease);
}
.theme-toggle:hover{
    box-shadow:
        inset 0 2px 6px rgba(0,0,0,.4),
        0 0 0 2.5px var(--gold),
        0 0 14px rgba(201,150,58,.3);
}
/* Light-mode track: warm sky */
[data-theme="light"] .theme-toggle{
    background:linear-gradient(135deg,#87CEEB 0%,#FDB813 100%);
    box-shadow:
        inset 0 2px 6px rgba(0,0,0,.15),
        0 0 0 1.5px rgba(180,130,40,.3);
}
[data-theme="light"] .theme-toggle:hover{
    box-shadow:
        inset 0 2px 6px rgba(0,0,0,.15),
        0 0 0 2.5px #FDB813,
        0 0 14px rgba(253,184,19,.4);
}

/* Stars decoration (dark mode only) */
.theme-toggle::after{
    content:'';
    position:absolute;
    top:6px;left:8px;
    width:4px;height:4px;border-radius:50%;
    background:#fff;
    box-shadow:
        10px  2px 0 1px rgba(255,255,255,.8),
        18px -1px 0 .5px rgba(255,255,255,.5),
         5px  8px 0 .5px rgba(255,255,255,.4);
    opacity:1;
    transition:opacity .35s var(--ease);
}
[data-theme="light"] .theme-toggle::after{
    opacity:0;
}

/* The sliding knob */
.tgl-knob{
    position:absolute;
    top:4px;left:4px;
    width:24px;height:24px;
    border-radius:50%;
    display:flex;align-items:center;justify-content:center;
    font-size:13px;
    line-height:1;
    /* Dark knob: glowing moon */
    background:linear-gradient(135deg,#2b2d6e,#4a4fbf);
    box-shadow:
        0 2px 8px rgba(0,0,0,.5),
        0 0 12px rgba(120,130,255,.5);
    transition:
        transform .4s cubic-bezier(.34,1.56,.64,1),
        background .35s var(--ease),
        box-shadow .35s var(--ease);
    pointer-events:none;
    user-select:none;
}
[data-theme="light"] .tgl-knob{
    transform:translateX(40px);
    /* Light knob: sunny */
    background:linear-gradient(135deg,#FFD700,#FFF176);
    box-shadow:
        0 2px 8px rgba(0,0,0,.2),
        0 0 16px rgba(255,215,0,.7);
}

/* Moon icon â€” shown in dark mode */
.tgl-moon{
    display:flex;align-items:center;justify-content:center;
    font-size:14px;line-height:1;
    transition:opacity .25s var(--ease), transform .25s var(--ease);
    position:absolute;
}
.tgl-sun{
    display:flex;align-items:center;justify-content:center;
    font-size:14px;line-height:1;
    opacity:0;transform:rotate(-45deg) scale(.5);
    transition:opacity .25s var(--ease), transform .25s var(--ease);
    position:absolute;
}
[data-theme="light"] .tgl-moon{
    opacity:0;transform:rotate(45deg) scale(.5);
}
[data-theme="light"] .tgl-sun{
    opacity:1;transform:rotate(0deg) scale(1);
}

/* Side labels */
.tgl-label{
    font-size:10px;font-weight:700;letter-spacing:.6px;text-transform:uppercase;
    color:var(--txt-muted);font-family:'Inter',sans-serif;
    user-select:none;pointer-events:none;white-space:nowrap;
    transition:color .3s var(--ease);
}
.tb-brand{display:flex;align-items:center;gap:10px;flex-shrink:0;}
.tb-gem{
    width:38px;height:38px;border-radius:11px;flex-shrink:0;
    background:linear-gradient(135deg,var(--gold-dark),var(--gold));
    display:flex;align-items:center;justify-content:center;
    font-size:19px;box-shadow:var(--sh-gold);
}
.tb-texts{display:flex;flex-direction:column;line-height:1.15;}
.tb-name{
    font-size:15px;font-weight:900;letter-spacing:.4px;
    background:linear-gradient(90deg,var(--gold-light),var(--gold));
    -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
}
.tb-addr{font-size:9px;color:var(--txt-muted);font-family:'Noto Nastaliq Urdu',serif;}
.tb-right{display:flex;align-items:center;gap:8px;}
.pill{
    display:flex;align-items:center;gap:5px;
    background:rgba(255,255,255,.04);border:1px solid var(--border-soft);
    border-radius:50px;padding:5px 12px;
    font-size:11px;color:var(--txt-muted);font-family:'JetBrains Mono',monospace;
    white-space:nowrap;
}
.pill input{
    background:transparent;border:none;outline:none;
    color:var(--gold-light);font-weight:700;font-size:11px;
    width:56px;font-family:'JetBrains Mono',monospace;
    -webkit-user-select:text;
}
.pill-dot{width:6px;height:6px;border-radius:50%;background:var(--gold);animation:blink 2s infinite;flex-shrink:0;}
@keyframes blink{0%,100%{opacity:1;}50%{opacity:.3;}}

/* ============================================================
   MAIN LAYOUT
   ============================================================ */
.layout{
    flex:1;display:flex;flex-direction:column;
    max-width:1120px;margin:0 auto;width:100%;
    padding:20px 14px 50px;gap:18px;
}
@media(min-width:768px){
    .layout{flex-direction:row;align-items:flex-start;padding:26px 24px 60px;}
    .bill-col{position:sticky;top:72px;}
}

/* ============================================================
   CARDS
   ============================================================ */
.card{
    background:var(--bg-card);
    border:1px solid var(--border-soft);
    border-radius:var(--r-lg);
    padding:20px;
    box-shadow:var(--sh-card);
    transition:border-color .25s var(--ease);
}
.card:hover{border-color:var(--border);}
.card-lbl{
    font-size:10px;font-weight:700;letter-spacing:1.1px;
    color:var(--txt-muted);text-transform:uppercase;
    display:flex;align-items:center;gap:7px;margin-bottom:15px;
}
.card-lbl::before{
    content:'';display:block;width:3px;height:13px;border-radius:3px;flex-shrink:0;
    background:linear-gradient(180deg,var(--gold-light),var(--gold-dark));
}

/* BILL column width */
.bill-col{flex:0 0 auto;width:100%;max-width:440px;}
.ctrl-col{flex:1;display:flex;flex-direction:column;gap:16px;}

/* ============================================================
   SHOP HEADER (screen)
   ============================================================ */
.shop-hdr{
    text-align:center;padding:18px 14px;margin-bottom:18px;
    background:linear-gradient(135deg,rgba(201,150,58,.1),rgba(201,150,58,.025));
    border:1px solid var(--border);border-radius:var(--r-md);
    position:relative;overflow:hidden;
}
.shop-hdr::before{
    content:'';position:absolute;top:0;left:0;right:0;height:2px;
    background:linear-gradient(90deg,transparent,var(--gold),transparent);
}
.shop-hdr::after{
    content:'';position:absolute;bottom:0;left:0;right:0;height:1px;
    background:linear-gradient(90deg,transparent,rgba(201,150,58,.3),transparent);
}
.sh-diamond{font-size:22px;display:block;margin-bottom:4px;line-height:1;}
.sh-name{
    font-size:22px;font-weight:900;letter-spacing:2px;display:block;
    background:linear-gradient(90deg,var(--gold-pale),var(--gold-light),var(--gold));
    -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
    font-family:'Inter',sans-serif;margin-bottom:2px;
}
.sh-tagline{font-size:9px;color:var(--gold-dark);letter-spacing:2px;text-transform:uppercase;font-weight:600;display:block;margin-bottom:6px;}
.sh-addr{font-size:11px;color:var(--txt-muted);display:block;font-family:'Noto Nastaliq Urdu',serif;}
.sh-mob{font-size:11px;color:var(--txt-muted);display:block;direction:ltr;font-family:'JetBrains Mono',monospace;margin-top:3px;}

/* ============================================================
   METAL BUTTONS
   ============================================================ */
.metal-row{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:18px;}
.mbtn{
    padding:13px 10px;border-radius:var(--r-md);cursor:pointer;
    font-size:14px;font-weight:700;text-align:center;
    border:1.5px solid transparent;
    font-family:'Noto Nastaliq Urdu',serif;
    transition:all .25s var(--ease);
    position:relative;overflow:hidden;
}
.mbtn:active{transform:scale(.97);}
.gbtn{background:linear-gradient(135deg,#2d1e00,#3d2a00);border-color:rgba(201,150,58,.3);color:#c8a84b;}
.gbtn.active,.gbtn:hover{
    background:linear-gradient(135deg,var(--gold-dark),var(--gold));
    border-color:var(--gold-light);color:#1a0e00;
    box-shadow:0 6px 28px rgba(201,150,58,.45);
}
.sbtn{background:linear-gradient(135deg,#151e28,#1a2535);border-color:rgba(170,184,200,.2);color:#8faac0;}
.sbtn.active,.sbtn:hover{
    background:linear-gradient(135deg,#3d5068,var(--silver));
    border-color:var(--silver-light);color:#0d1620;
    box-shadow:0 6px 28px rgba(170,184,200,.3);
}

/* ============================================================
   FORM FIELDS
   ============================================================ */
.frow{display:grid;gap:10px;margin-bottom:12px;}
.frow-2{grid-template-columns:1fr 1fr;}
.frow-1{grid-template-columns:1fr;}

.fg{display:flex;flex-direction:column;gap:5px;}
.flbl{
    font-size:11px;color:var(--txt-muted);font-weight:600;
    font-family:'Noto Nastaliq Urdu',serif;font-size:12px;
    padding-right:2px;
}
.finput{
    background:var(--bg-input);border:1.5px solid var(--border-soft);
    border-radius:var(--r-sm);padding:11px 13px;
    color:var(--txt);font-family:'Inter',sans-serif;
    font-weight:600;font-size:15px;outline:none;width:100%;
    transition:border-color .2s var(--ease),box-shadow .2s var(--ease);
    -webkit-user-select:text;
}
.finput:focus{border-color:var(--gold);box-shadow:0 0 0 3px rgba(201,150,58,.12);}
.finput::placeholder{color:var(--txt-muted);font-weight:400;}
.finput.urdu{text-align:right;font-family:'Noto Nastaliq Urdu',serif;font-size:13px;}
.finput.rate{color:#FF9F6B;font-size:20px;text-align:center;border-color:rgba(255,159,107,.2);}
.finput.rate:focus{border-color:#FF9F6B;box-shadow:0 0 0 3px rgba(255,159,107,.12);}
.finput.wt{color:#7FD49A;font-size:20px;text-align:center;border-color:rgba(127,212,154,.2);}
.finput.wt:focus{border-color:#7FD49A;box-shadow:0 0 0 3px rgba(127,212,154,.12);}

/* ============================================================
   ITEMS TABLE
   ============================================================ */
.tbl-wrap{
    background:var(--bg-surface);border:1px solid var(--border-soft);
    border-radius:var(--r-md);overflow:hidden;margin-bottom:14px;
}
.tbl-wrap table{width:100%;border-collapse:collapse;}
.tbl-wrap thead tr{background:linear-gradient(90deg,rgba(201,150,58,.12),rgba(201,150,58,.04));}
.tbl-wrap th{
    font-size:11px;font-weight:700;color:var(--gold);
    padding:10px 8px;text-align:center;
    border-bottom:1px solid var(--border);
    font-family:'Noto Nastaliq Urdu',serif;font-size:12px;
}
.tbl-wrap td{padding:6px 6px;border-bottom:1px solid var(--tbl-row-border);}
.tbl-wrap tr:last-child td{border-bottom:none;}
.rinput{
    border:none;width:100%;height:34px;font-size:13px;
    text-align:center;outline:none;background:transparent;
    font-family:'Inter',sans-serif;font-weight:600;color:var(--txt);
    border-radius:6px;transition:background .2s;
    -webkit-user-select:text;
}
.rinput:focus{background:var(--rinput-focus);}
.net-val{
    font-weight:700;font-size:15px;font-family:'JetBrains Mono',monospace;
    color:var(--net-val-color);text-align:center;display:block;padding:6px 0;
}

/* ============================================================
   TMR SECTION
   ============================================================ */
.tmr-wrap{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px;margin-bottom:14px;}
.tmr-box{
    background:var(--bg-surface);border:1px solid var(--border-soft);
    border-radius:var(--r-sm);padding:12px 8px;text-align:center;
    transition:border-color .2s;
}
.tmr-box:hover{border-color:var(--border);}
.tmr-letter{
    font-size:10px;font-weight:800;letter-spacing:1.5px;
    text-transform:uppercase;color:var(--txt-muted);margin-bottom:5px;
    font-family:'Inter',sans-serif;
}
.tmr-in{
    background:transparent;border:none;outline:none;
    color:var(--gold-light);font-weight:800;font-size:22px;
    text-align:center;width:100%;font-family:'JetBrains Mono',monospace;
    -webkit-user-select:text;
}
.tmr-sub{font-size:9px;color:var(--txt-muted);margin-top:3px;font-family:'Inter',sans-serif;}

/* ============================================================
   TOTAL SECTION
   ============================================================ */
.total-card{
    background:linear-gradient(135deg,rgba(201,150,58,.1),rgba(201,150,58,.025));
    border:1.5px solid var(--border);border-radius:var(--r-md);
    padding:18px;margin-bottom:14px;position:relative;overflow:hidden;
}
.total-card::before{
    content:'';position:absolute;top:0;left:0;right:0;height:2px;
    background:linear-gradient(90deg,transparent,var(--gold),transparent);
}
.total-lbl{font-family:'Noto Nastaliq Urdu',serif;font-size:12px;color:var(--txt-muted);display:block;margin-bottom:5px;}
.total-in{
    background:transparent;border:none;outline:none;
    color:var(--gold-light);font-weight:900;font-size:36px;
    width:100%;font-family:'JetBrains Mono',monospace;
    -webkit-user-select:text;line-height:1.05;
}
.total-in::placeholder{color:rgba(201,150,58,.25);}
#totalUrdu{
    font-family:'Noto Nastaliq Urdu',serif;font-size:13px;
    color:var(--txt-muted);text-align:right;
    margin-top:9px;padding-top:9px;
    border-top:1px solid var(--totalurdu-border);
    line-height:1.7;min-height:24px;
}

/* photo */
#photo-wrap{display:none;text-align:center;margin:12px 0;}
#captured-image{width:80px;height:80px;object-fit:cover;border:2px solid var(--gold);border-radius:var(--r-sm);display:block;margin:0 auto;box-shadow:var(--sh-gold);}

/* ============================================================
   DIVIDER
   ============================================================ */
.divider{display:flex;align-items:center;gap:10px;margin:4px 0 14px;}
.divider-line{flex:1;height:1px;background:var(--divider-line);}
.divider-txt{font-size:9px;font-weight:700;letter-spacing:1.2px;text-transform:uppercase;color:var(--txt-muted);white-space:nowrap;}

/* ============================================================
   CONTROL BUTTONS
   ============================================================ */
.btn{
    display:flex;align-items:center;justify-content:center;gap:9px;
    padding:13px 18px;border-radius:var(--r-md);cursor:pointer;
    font-size:14px;font-weight:700;border:1.5px solid transparent;
    transition:all .22s var(--ease);width:100%;
    font-family:'Noto Nastaliq Urdu',serif;
    position:relative;overflow:hidden;
}
.btn:active{transform:scale(.97);}

.btn-cam{background:linear-gradient(135deg,#0e1f0e,#122014);border-color:rgba(127,212,154,.2);color:#7FD49A;}
.btn-cam:hover{border-color:#7FD49A;box-shadow:0 4px 20px rgba(127,212,154,.18);}
.btn-ghost{background:rgba(255,255,255,.03);border-color:var(--border-soft);color:var(--txt-muted);}
.btn-ghost:hover{border-color:var(--border);color:var(--txt);background:rgba(255,255,255,.06);}
.btn-warn{background:linear-gradient(135deg,#231600,#311d00);border-color:rgba(255,193,7,.25);color:#FFC107;}
.btn-warn:hover{border-color:#FFC107;box-shadow:0 4px 20px rgba(255,193,7,.18);}
.btn-print{
    background:linear-gradient(135deg,var(--gold-dark),var(--gold));
    border-color:var(--gold-light);color:#1a0e00;
    box-shadow:var(--sh-gold);
}
.btn-print:hover{box-shadow:0 8px 36px rgba(201,150,58,.55);transform:translateY(-1px) scale(.99);}
.btn-danger{background:linear-gradient(135deg,#1c0808,#260e0e);border-color:rgba(248,113,113,.2);color:#f87171;}
.btn-danger:hover{border-color:#f87171;box-shadow:0 4px 20px rgba(248,113,113,.18);}

.cam-sub{display:none;flex-direction:column;gap:8px;margin-top:8px;animation:slideUp .2s ease;}
@keyframes slideUp{from{opacity:0;transform:translateY(-8px);}to{opacity:1;transform:translateY(0);}}
.cam-sub-btn{
    background:var(--bg-surface);border:1px solid var(--border-soft);border-radius:var(--r-sm);
    padding:10px 14px;color:var(--txt-muted);cursor:pointer;text-align:center;
    font-size:12px;font-family:'Inter',sans-serif;font-weight:600;
    transition:all .2s;
}
.cam-sub-btn:hover{border-color:var(--border);color:var(--txt);}

video{width:100%;display:none;background:#000;border-radius:var(--r-md);margin-top:8px;transform:scaleX(-1);border:1px solid var(--border-soft);}

/* ============================================================
   INFO FOOTER
   ============================================================ */
.app-foot{
    text-align:center;padding:14px;font-size:10px;
    color:var(--txt-muted);border-top:1px solid var(--border-soft);
    font-family:'Inter',sans-serif;letter-spacing:.3px;
}

/* ============================================================
   ANIMATIONS
   ============================================================ */
.bill-col .card{animation:fadeUp .4s ease both;}
.ctrl-col .card:nth-child(1){animation:fadeUp .38s .1s ease both;}
.ctrl-col .card:nth-child(2){animation:fadeUp .38s .2s ease both;}
@keyframes fadeUp{from{opacity:0;transform:translateY(18px);}to{opacity:1;transform:translateY(0);}}

@keyframes goldPulse{
    0%,100%{box-shadow:0 4px 28px rgba(201,150,58,.22);}
    50%     {box-shadow:0 8px 48px rgba(201,150,58,.6);}
}
.pulse{animation:goldPulse .55s ease;}

/* ============================================================
   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
   PRINT STYLES  â€”  Professional 58mm Thermal Receipt
   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
   ============================================================ */
@media print {

    /* â”€â”€ hide everything except the slip â”€â”€ */
    .topbar,
    .ctrl-col,
    .metal-row,
    .app-foot,
    video,
    .btn,
    .btn-cam,
    .cam-sub,
    .cam-sub-btn,
    #capBtn,
    #photo-wrap { display:none !important; }

    /* â”€â”€ reset body â”€â”€ */
    *{
        -webkit-user-select:text !important;
        user-select:text !important;
        -webkit-print-color-adjust:exact !important;
        print-color-adjust:exact !important;
    }
    html,body{
        background:#fff !important;
        margin:0 !important;padding:0 !important;
        color:#000 !important;
        font-family:'Arial Narrow',Arial,sans-serif !important;
    }

    /* â”€â”€ layout â”€â”€ */
    .app{display:block !important;}
    .layout{
        display:block !important;padding:0 !important;margin:0 !important;
        max-width:none !important;
    }
    .bill-col{
        width:58mm !important;max-width:58mm !important;
        position:static !important;margin:0 !important;padding:0 !important;
    }

    /* â”€â”€ main card becomes the slip â”€â”€ */
    .card{
        background:#fff !important;border:none !important;
        border-radius:0 !important;box-shadow:none !important;
        padding:2mm !important;margin:0 !important;
        color:#000 !important;
    }

    /* â”€â”€ SHOP HEADER â”€â”€ */
    .shop-hdr{
        background:#fff !important;
        border:none !important;border-radius:0 !important;
        border-bottom:2px solid #000 !important;
        padding:0 0 3mm !important;margin-bottom:3mm !important;
        position:static !important;
    }
    .shop-hdr::before,.shop-hdr::after{display:none !important;}
    .sh-diamond{display:none !important;}
    .sh-name{
        -webkit-text-fill-color:#000 !important;
        font-size:15pt !important;font-weight:900 !important;
        letter-spacing:1px !important;display:block !important;
        text-align:center !important;margin-bottom:1mm !important;
    }
    .sh-tagline{
        font-size:6pt !important;letter-spacing:1.5px !important;
        color:#555 !important;display:block !important;text-align:center !important;
        margin-bottom:2mm !important;
    }
    .sh-addr{
        font-size:8pt !important;color:#333 !important;
        display:block !important;text-align:center !important;
        font-family:'Noto Nastaliq Urdu',serif !important;
    }
    .sh-mob{
        font-size:8pt !important;color:#333 !important;
        display:block !important;text-align:center !important;
        font-family:Arial,sans-serif !important;direction:ltr !important;
        margin-top:1mm !important;
    }

    /* â”€â”€ META ROW (inv + date) â€” inject via printed-meta â”€â”€ */
    .print-meta-row{
        display:flex !important;justify-content:space-between !important;
        font-size:7pt !important;color:#333 !important;
        border-bottom:1px dashed #888 !important;
        padding:1.5mm 0 !important;margin-bottom:2mm !important;
        font-family:Arial,sans-serif !important;
    }

    /* â”€â”€ LABELS & INPUTS â”€â”€ */
    .flbl{
        font-size:7pt !important;color:#555 !important;
        font-family:'Noto Nastaliq Urdu',serif !important;
    }
    .finput{
        background:#fff !important;border:none !important;
        border-radius:0 !important;padding:0 !important;
        color:#000 !important;font-size:9pt !important;
        font-family:Arial,sans-serif !important;
        box-shadow:none !important;
    }
    .finput.rate{font-size:10pt !important;color:#000 !important;}
    .finput.wt  {font-size:10pt !important;color:#000 !important;}
    .finput.urdu{font-family:'Noto Nastaliq Urdu',serif !important;font-size:9pt !important;text-align:right !important;}
    .frow{margin-bottom:1.5mm !important;gap:4px !important;}
    .fg{gap:0 !important;}

    /* â”€â”€ TABLE â”€â”€ */
    .tbl-wrap{
        background:#fff !important;border:none !important;
        border-top:1px solid #000 !important;
        border-radius:0 !important;margin-bottom:2mm !important;
    }
    .tbl-wrap thead tr{background:#fff !important;}
    .tbl-wrap th{
        font-size:8pt !important;color:#000 !important;
        border-bottom:1px solid #000 !important;
        padding:1.5mm 1mm !important;
        font-family:'Noto Nastaliq Urdu',serif !important;
    }
    .tbl-wrap td{padding:1mm !important;border-bottom:none !important;}
    .rinput{
        background:#fff !important;color:#000 !important;
        font-size:9pt !important;font-family:Arial,sans-serif !important;
    }
    .rinput:focus{background:#fff !important;}
    .net-val{color:#000 !important;font-size:10pt !important;font-family:Arial,sans-serif !important;}

    /* â”€â”€ TMR â”€â”€ */
    .divider{display:none !important;}
    .tmr-wrap{
        display:flex !important;justify-content:space-between !important;
        border-top:1px dashed #888 !important;
        padding-top:1.5mm !important;margin-bottom:2mm !important;
        gap:0 !important;
    }
    .tmr-box{
        background:#fff !important;border:none !important;
        padding:1mm 2mm !important;text-align:center !important;
    }
    .tmr-letter{
        font-size:7pt !important;color:#555 !important;
        letter-spacing:.5px !important;margin-bottom:0 !important;
    }
    .tmr-in{
        font-size:10pt !important;font-weight:700 !important;
        color:#000 !important;font-family:Arial,sans-serif !important;
    }
    .tmr-sub{font-size:6pt !important;color:#777 !important;}

    /* â”€â”€ TOTAL â”€â”€ */
    .total-card{
        background:#fff !important;border:none !important;
        border-top:2px solid #000 !important;
        border-radius:0 !important;padding:2mm 0 0 !important;
        margin-bottom:1mm !important;
    }
    .total-card::before{display:none !important;}
    .total-lbl{
        font-size:8pt !important;color:#333 !important;
        font-family:'Noto Nastaliq Urdu',serif !important;
    }
    .total-in{
        font-size:16pt !important;font-weight:900 !important;
        color:#000 !important;font-family:Arial,sans-serif !important;
    }
    #totalUrdu{
        font-size:8pt !important;color:#333 !important;
        border-top:1px dashed #aaa !important;
        padding-top:1.5mm !important;margin-top:1.5mm !important;
        font-family:'Noto Nastaliq Urdu',serif !important;
        line-height:1.6 !important;text-align:right !important;
    }

    /* â”€â”€ PRINT FOOTER â”€â”€ */
    .print-footer{
        display:block !important;
        text-align:center !important;
        margin-top:3mm !important;
        padding-top:2mm !important;
        border-top:1px dashed #aaa !important;
        font-size:7pt !important;color:#555 !important;
        font-family:Arial,sans-serif !important;
        line-height:1.6 !important;
    }
    .print-footer strong{font-size:8pt !important;color:#000 !important;}

} /* end @media print */

/* ============================================================
   RESPONSIVE
   ============================================================ */
@media(max-width:767px){
    .layout{max-width:100%;}
    .bill-col{max-width:100%;}
    .total-in{font-size:30px;}
}
@media(max-width:400px){
    .topbar{padding:9px 12px;}
    .btn{font-size:13px;padding:11px 14px;}
    .total-in{font-size:26px;}
    .sh-name{font-size:18px;}
}
</style>
</head>
<body>
<div class="app">

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• TOP BAR â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<header class="topbar">
    <div class="tb-brand">
        <div class="tb-gem">ğŸ’</div>
        <div class="tb-texts">
            <span class="tb-name">RTK JEWL ART</span>
            <span class="tb-addr">MODEL SARAFA BAZAR SADIQ ABAD</span>
        </div>
    </div>
    <div class="tb-right">
        <div class="pill">
            <span class="pill-dot"></span>
            <span id="dt"></span>&nbsp;<span id="tm"></span>
        </div>
        <div class="pill">
            INV&nbsp;<input type="text" id="invNum" aria-label="Invoice Number">
        </div>
        <div class="theme-toggle-wrap">
            <span class="tgl-label" id="tglLabelDark">Dark</span>
            <button class="theme-toggle" id="themeToggle" onclick="toggleTheme()" aria-label="Toggle dark/light theme" title="Switch Theme">
                <span class="tgl-knob">
                    <span class="tgl-moon">ğŸŒ™</span>
                    <span class="tgl-sun">â˜€ï¸</span>
                </span>
            </button>
            <span class="tgl-label" id="tglLabelLight">Light</span>
        </div>
    </div>
</header>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• LAYOUT â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<main class="layout">

    <!-- â”€â”€â”€â”€â”€â”€ BILL COLUMN â”€â”€â”€â”€â”€â”€ -->
    <div class="bill-col">
    <div class="card">

        <!-- Shop Header -->
        <div id="shopTitleSection" class="shop-hdr">
            <span class="sh-diamond">ğŸ’</span>
            <span class="sh-name">RTK JEWL ART</span>
            <span class="sh-tagline">JEWELLERS &amp; GOLDSMITHS</span>
            <span class="sh-addr">MODEL SARAFA BAZAR SADIQ ABAD</span>
            <span class="sh-mob">0300-8410932 &nbsp;|&nbsp; 0317-7110932</span>
        </div>

        <!-- Print-only meta row: date + invoice -->
        <div class="print-meta-row" id="printMeta">
            <span id="printDt"></span>
            <span>INV# <strong id="printInv"></strong></span>
        </div>

        <!-- Metal Selector -->
        <div class="metal-row">
            <div class="mbtn gbtn active" id="goldBtn" onclick="setMetal('Gold')">ğŸ¥‡ GOLD &nbsp;(Ø³ÙˆÙ†Ø§)</div>
            <div class="mbtn sbtn" id="silverBtn" onclick="setMetal('Silver')">ğŸ¥ˆ SILVER &nbsp;(Ú†Ø§Ù†Ø¯ÛŒ)</div>
        </div>

        <!-- Customer / Rate -->
        <div class="frow frow-2">
            <div class="fg">
                <span class="flbl">Ù†Ø§Ù… (Customer)</span>
                <input type="text" id="custName" value=".........." class="finput urdu" onclick="this.select()" aria-label="Customer Name">
            </div>
            <div class="fg">
                <span class="flbl">Ø±ÛŒÙ¹ / ØªÙˆÙ„Û</span>
                <input type="number" id="r" placeholder="0" oninput="calcByWeight()" class="finput rate" onclick="this.select()" aria-label="Rate per Tola">
            </div>
        </div>

        <!-- Weight -->
        <div class="frow frow-1">
            <div class="fg">
                <span class="flbl">ÙˆØ²Ù† â€” Ú¯Ø±Ø§Ù… Ù…ÛŒÚº (Weight in grams)</span>
                <input type="number" id="w" step="0.001" placeholder="0.000" oninput="calcByWeight()" class="finput wt" onclick="this.select()" aria-label="Weight">
            </div>
        </div>

        <!-- Photo -->
        <div id="photo-wrap"><img id="captured-image" alt="Captured"></div>

        <!-- Items Table -->
        <div class="tbl-wrap">
            <table>
                <thead>
                    <tr>
                        <th style="width:32%">ØªÙØµÛŒÙ„</th>
                        <th style="width:28%">Ú©Ø§Ù¹</th>
                        <th style="width:40%">ØµØ§ÙÛŒ ÙˆØ²Ù†</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input type="text" id="itemName" value="Gold" class="rinput" aria-label="Item"></td>
                        <td><input type="number" id="k" step="0.1" value="0.0" oninput="calcByWeight()" class="rinput" onclick="this.select()" aria-label="Deduction"></td>
                        <td><span id="s" class="net-val">0.000</span></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- TMR -->
        <div class="divider">
            <div class="divider-line"></div>
            <span class="divider-txt">Tola Â· Masha Â· Ratti</span>
            <div class="divider-line"></div>
        </div>
        <div class="tmr-wrap">
            <div class="tmr-box">
                <div class="tmr-letter">T</div>
                <input type="number" id="inT" class="tmr-in" oninput="calcByTMR()" value="0" onclick="this.select()" aria-label="Tola">
                <div class="tmr-sub">Tola</div>
            </div>
            <div class="tmr-box">
                <div class="tmr-letter">M</div>
                <input type="number" id="inM" class="tmr-in" oninput="calcByTMR()" value="0" onclick="this.select()" aria-label="Masha">
                <div class="tmr-sub">Masha</div>
            </div>
            <div class="tmr-box">
                <div class="tmr-letter">R</div>
                <input type="number" id="inR" class="tmr-in" oninput="calcByTMR()" value="0" onclick="this.select()" aria-label="Ratti">
                <div class="tmr-sub">Ratti</div>
            </div>
        </div>

        <!-- Total -->
        <div class="total-card" id="totalSection">
            <span class="total-lbl">Ù¹ÙˆÙ¹Ù„ Ø±Ù‚Ù… â€” Total Amount (PKR)</span>
            <input type="number" id="total" class="total-in" oninput="calcByPrice()" value="0" placeholder="0" aria-label="Total Amount">
            <div id="totalUrdu">ØµÙØ± Ø±ÙˆÙ¾Û’ ÙÙ‚Ø·</div>
        </div>

        <!-- Print-only footer -->
        <div class="print-footer" id="printFooter">
            <div>â”€â”€ Ø´Ú©Ø±ÛŒÛ â”€â”€</div>
            <strong>RTK JEWL ART</strong><br>
            MODEL SARAFA BAZAR SADIQ ABAD<br>
            0300-8410932 &nbsp;|&nbsp; 0317-7110932<br>
            <small>Ø¯ÙˆØ¨Ø§Ø±Û ØªØ´Ø±ÛŒÙ Ù„Ø§Ø¦ÛŒÚº â€” Thank you for your business</small>
        </div>

    </div><!-- .card -->
    </div><!-- .bill-col -->

    <!-- â”€â”€â”€â”€â”€â”€ CONTROLS COLUMN â”€â”€â”€â”€â”€â”€ -->
    <div class="ctrl-col">

        <!-- Camera Card -->
        <div class="card">
            <div class="card-lbl">ğŸ“· Ú©ÛŒÙ…Ø±Û / Camera</div>
            <div style="display:flex;flex-direction:column;gap:9px;">
                <button class="btn btn-cam" onclick="toggleCamMenu()" aria-label="Camera Toggle">
                    ğŸ“· &nbsp;Ú©ÛŒÙ…Ø±Û On / Off
                </button>
                <div id="camMenu" class="cam-sub">
                    <button class="cam-sub-btn" onclick="startCamera('user')">ğŸ¤³ Front Camera</button>
                    <button class="cam-sub-btn" onclick="startCamera('environment')">ğŸ“¸ Back Camera</button>
                    <button class="cam-sub-btn" onclick="stopCamera()" style="color:#f87171;">âœ• &nbsp;Ú©ÛŒÙ…Ø±Û Ø¨Ù†Ø¯ Ú©Ø±ÛŒÚº</button>
                </div>
                <video id="video" autoplay playsinline muted></video>
                <button id="capBtn" class="btn btn-warn" style="display:none;" onclick="capture()">
                    ğŸ“¸ &nbsp;ØªØµÙˆÛŒØ± Ù„ÛŒÚº â€” Capture
                </button>
            </div>
        </div>

        <!-- Actions Card -->
        <div class="card">
            <div class="card-lbl">âš™ï¸ Ø§Ù‚Ø¯Ø§Ù…Ø§Øª / Actions</div>
            <div style="display:flex;flex-direction:column;gap:10px;">
                <button class="btn btn-ghost" onclick="toggleTitle()">ğŸ‘ &nbsp;Ù¹Ø§Ø¦Ù¹Ù„ Ú†Ú¾Ù¾Ø§Ø¦ÛŒÚº / Ø¯Ú©Ú¾Ø§Ø¦ÛŒÚº</button>
                <button class="btn btn-warn" onclick="location.reload()">ğŸ”„ &nbsp;Ù†ÛŒØ§ Ø¨Ù„ â€” New Bill / REFRESH</button>
                <button class="btn btn-print" onclick="doPrint()">ğŸ–¨ï¸ &nbsp;Ù¾Ø±Ù†Ù¹ Ù†Ú©Ø§Ù„ÛŒÚº â€” PRINT RECEIPT</button>
            </div>
        </div>

    </div><!-- .ctrl-col -->

</main>

<footer class="app-foot">
    ğŸ’ RTK JEWL ART &nbsp;Â·&nbsp; Professional Jewelry Billing &nbsp;Â·&nbsp; Sadiq Abad
</footer>

</div><!-- .app -->

<script>
// â”€â”€â”€ Theme System â”€â”€â”€
function updateToggleLabels(theme) {
    const lDark  = document.getElementById('tglLabelDark');
    const lLight = document.getElementById('tglLabelLight');
    if (!lDark || !lLight) return;
    if (theme === 'dark') {
        lDark.style.color  = 'var(--gold)';
        lLight.style.color = 'var(--txt-muted)';
    } else {
        lDark.style.color  = 'var(--txt-muted)';
        lLight.style.color = '#FDB813';
    }
}

(function () {
    const saved = localStorage.getItem('rtkTheme');
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const theme = saved || 'light';
    document.documentElement.setAttribute('data-theme', theme);
    document.getElementById('themeColorMeta').setAttribute('content', theme === 'dark' ? '#0b0b14' : '#F5F3EE');
    // labels update after DOM ready
    document.addEventListener('DOMContentLoaded', () => updateToggleLabels(theme));
    // fallback in case script runs after DOM
    if (document.readyState !== 'loading') updateToggleLabels(theme);
})();

function toggleTheme() {
    const html = document.documentElement;
    const current = html.getAttribute('data-theme') || 'dark';
    const next = current === 'dark' ? 'light' : 'dark';
    html.setAttribute('data-theme', next);
    localStorage.setItem('rtkTheme', next);
    document.getElementById('themeColorMeta').setAttribute('content', next === 'dark' ? '#0b0b14' : '#F5F3EE');
    updateToggleLabels(next);
}

// â”€â”€â”€ Service Worker â”€â”€â”€
if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('data:text/javascript;base64,c2VsZi5hZGRFdmVudExpc3RlbmVyKCdpbnN0YWxsJywgZSA9PiB7IHNlbGYuc2tpcFdhaXRpbmcoKTsgfSk7').catch(()=>{});
}

let stream = null;
const G_FACTOR = 11.664;

// â”€â”€â”€ Metal â”€â”€â”€
function setMetal(type) {
    document.getElementById('itemName').value = type;
    const gb = document.getElementById('goldBtn');
    const sb = document.getElementById('silverBtn');
    if (type === 'Silver') {
        sb.classList.add('active'); gb.classList.remove('active');
        document.getElementById('r').value = '';
    } else {
        gb.classList.add('active'); sb.classList.remove('active');
    }
    calcByWeight();
}

// â”€â”€â”€ Camera â”€â”€â”€
function toggleCamMenu() {
    const m = document.getElementById('camMenu');
    m.style.display = (m.style.display === 'flex') ? 'none' : 'flex';
}
async function startCamera(mode) {
    try {
        if (stream) stopCamera();
        stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: mode } });
        const v = document.getElementById('video');
        v.srcObject = stream; v.style.display = 'block';
        v.style.transform = (mode === 'user') ? 'scaleX(-1)' : 'scaleX(1)';
        document.getElementById('capBtn').style.display = 'flex';
    } catch(e) { alert('Camera Permission Required'); }
}
function stopCamera() {
    if (stream) stream.getTracks().forEach(t => t.stop());
    stream = null;
    document.getElementById('video').style.display = 'none';
    document.getElementById('capBtn').style.display = 'none';
    document.getElementById('camMenu').style.display = 'none';
}
function capture() {
    const v = document.getElementById('video'), c = document.createElement('canvas');
    c.width = 200; c.height = 200;
    const ctx = c.getContext('2d');
    if (v.style.transform === 'scaleX(-1)') { ctx.translate(c.width,0); ctx.scale(-1,1); }
    ctx.drawImage(v, 0, 0, 200, 200);
    document.getElementById('captured-image').src = c.toDataURL('image/jpeg');
    document.getElementById('photo-wrap').style.display = 'block';
    stopCamera();
}

// â”€â”€â”€ Toggle Shop Title â”€â”€â”€
function toggleTitle() {
    const ts = document.getElementById('shopTitleSection');
    ts.style.display = (ts.style.display === 'none') ? 'block' : 'none';
}

// â”€â”€â”€ Urdu Amount (UNCHANGED) â”€â”€â”€
function amountToUrdu(num) {
    if (num == 0) return 'ØµÙØ± Ø±ÙˆÙ¾Û’ ÙÙ‚Ø·';
    const ones = ['','Ø§ÛŒÚ©','Ø¯Ùˆ','ØªÛŒÙ†','Ú†Ø§Ø±','Ù¾Ø§Ù†Ú†','Ú†Ú¾','Ø³Ø§Øª','Ø¢Ù¹Ú¾','Ù†Ùˆ','Ø¯Ø³','Ú¯ÛŒØ§Ø±Û','Ø¨Ø§Ø±Û','ØªÛŒØ±Û','Ú†ÙˆØ¯Û','Ù¾Ù†Ø¯Ø±Û','Ø³ÙˆÙ„Û','Ø³ØªØ±Û','Ø§Ù¹Ú¾Ø§Ø±Û','Ø§Ù†ÛŒØ³'];
    const tens = ['','','Ø¨ÛŒØ³','ØªÛŒØ³','Ú†Ø§Ù„ÛŒØ³','Ù¾Ú†Ø§Ø³','Ø³Ø§Ù¹Ú¾','Ø³ØªØ±','Ø§Ø³ÛŒ','Ù†ÙˆÛ’'];
    const comb = {
        2:'Ø§Ú©ÛŒØ³ØŒØ¨Ø§Ø¦ÛŒØ³ØŒØªØ¦ÛŒØ³ØŒÚ†ÙˆØ¨ÛŒØ³ØŒÙ¾Ú†ÛŒØ³ØŒÚ†Ú¾Ø¨ÛŒØ³ØŒØ³ØªØ§Ø¦ÛŒØ³ØŒØ§Ù¹Ú¾Ø§Ø¦ÛŒØ³ØŒØ§Ù†ØªÛŒØ³'.split('ØŒ'),
        3:'Ø§Ú©ØªÛŒØ³ØŒØ¨ØªÛŒØ³ØŒØªÛŒÙ†ØªÛŒØ³ØŒÚ†ÙˆÙ†ØªÛŒØ³ØŒÙ¾ÛŒÙ†ØªÛŒØ³ØŒÚ†Ú¾ØªÛŒØ³ØŒØ³ÛŒÙ†ØªÛŒØ³ØŒØ§Ù¹Ú¾ØªÛŒØ³ØŒØ§Ù†Ø·Ø§Ù„ÛŒØ³'.split('ØŒ'),
        4:'Ø§Ú©ØªØ§Ù„ÛŒØ³ØŒØ¨ÛŒØ§ Ù„ÛŒØ³ØŒØªÛŒÙ†ØªØ§Ù„ÛŒØ³ØŒÚ†ÙˆØ§Ù„ÛŒØ³ØŒÙ¾ÛŒÙ†ØªØ§Ù„ÛŒØ³ØŒÚ†Ú¾ÛŒØ§Ù„ÛŒØ³ØŒØ³ÛŒÙ†ØªØ§Ù„ÛŒØ³ØŒØ§Ú‘ØªØ§Ù„ÛŒØ³ØŒØ§Ù†Ú†Ø§Ø³'.split('ØŒ'),
        5:'Ø§Ú©ÛŒØ§ÙˆÙ†ØŒØ¨Ø§ÙˆÙ†ØŒØªØ±Ù¾Ù†ØŒÚ†ÙˆÙ†ØŒÙ¾Ú†Ù¾Ù†ØŒÚ†Ú¾Ù¾Ù†ØŒØ³ØªØ§ÙˆÙ†ØŒØ§Ù¹Ú¾Ø§ÙˆÙ†ØŒØ§Ù†Ø³Ù¹Ú¾'.split('ØŒ'),
        6:'Ø§Ú©Ø³Ù¹Ú¾ØŒØ¨Ø§Ø³Ù¹Ú¾ØŒØªØ±ÛŒØ³Ù¹Ú¾ØŒÚ†ÙˆÙ†Ø³Ù¹Ú¾ØŒÙ¾ÛŒÙ†Ø³Ù¹Ú¾ØŒÚ†Ú¾ÛŒØ§Ø³Ù¹Ú¾ØŒØ³Ú‘Ø³Ù¹Ú¾ØŒØ§Ù¹Ú¾Ø³Ù¹Ú¾ØŒØ§Ù†ÛØªØ±'.split('ØŒ'),
        7:'Ø§Ú©ÛØªØ±ØŒØ¨ÛØªØ±ØŒØªÛØªØ±ØŒÚ†ÙˆÛØªØ±ØŒÙ¾Ú†Ú¾ØªØ±ØŒÚ†Ú¾ÛØªØ±ØŒØ³ØªØªØ±ØŒØ§Ù¹Ú¾ØªØ±ØŒØ§Ù†Ø§Ø³ÛŒ'.split('ØŒ'),
        8:'Ø§Ú©ÛŒØ§Ø³ÛŒØŒØ¨ÛŒØ§Ø³ÛŒØŒØªØ±Ø§Ø³ÛŒØŒÚ†ÙˆØ±Ø§Ø³ÛŒØŒÙ¾Ú†Ø§Ø³ÛŒØŒÚ†Ú¾ÛŒØ§Ø³ÛŒØŒØ³ØªØ§Ø³ÛŒØŒØ§Ù¹Ú¾Ø§Ø³ÛŒØŒØ§Ù†Ø§Ù†ÙˆÛ’'.split('ØŒ'),
        9:'Ø§Ú©Ø§Ù†ÙˆÛ’ØŒØ¨Ø§Ù†ÙˆÛ’ØŒØªØ±Ø§Ù†ÙˆÛ’ØŒÚ†ÙˆØ±Ø§Ù†ÙˆÛ’ØŒÙ¾Ú†Ø§Ù†ÙˆÛ’ØŒÚ†Ú¾ÛŒØ§Ù†ÙˆÛ’ØŒØ³ØªØ§Ù†ÙˆÛ’ØŒØ§Ù¹Ú¾Ø§Ù†ÙˆÛ’ØŒÙ†ÛŒÙ†Ø§Ù†ÙˆÛ’'.split('ØŒ')
    };
    function words(n) {
        if (n < 20) return ones[n];
        if (n < 100) { let u=n%10,t=Math.floor(n/10); return u===0?tens[t]:comb[t][u-1]; }
        if (n < 1000) return ones[Math.floor(n/100)]+' Ø³Ùˆ '+(n%100!==0?words(n%100):'');
        if (n < 100000) return words(Math.floor(n/1000))+' ÛØ²Ø§Ø± '+(n%1000!==0?words(n%1000):'');
        if (n < 10000000) return words(Math.floor(n/100000))+' Ù„Ø§Ú©Ú¾ '+(n%100000!==0?words(n%100000):'');
        if (n < 1000000000) return words(Math.floor(n/10000000))+' Ú©Ø±ÙˆÚ‘ '+(n%10000000!==0?words(n%10000000):'');
        return n;
    }
    return words(Math.round(num)).replace(/\s+/g,' ').trim()+' Ø±ÙˆÙ¾Û’ ÙÙ‚Ø·';
}

// â”€â”€â”€ TMR (UNCHANGED) â”€â”€â”€
function updateTMR(tot) {
    let t=Math.floor(tot), m=Math.floor((tot-t)*12), r=Math.round(((tot-t)*12-m)*8);
    document.getElementById('inT').value=t;
    document.getElementById('inM').value=m;
    document.getElementById('inR').value=r;
}

// â”€â”€â”€ Pulse â”€â”€â”€
function pulseTotal() {
    const ts = document.getElementById('totalSection');
    ts.classList.remove('pulse');
    void ts.offsetWidth;
    ts.classList.add('pulse');
}

// â”€â”€â”€ Calculations (UNCHANGED LOGIC) â”€â”€â”€
function calcByWeight() {
    let w=parseFloat(document.getElementById('w').value)||0,
        k=parseFloat(document.getElementById('k').value)||0,
        r=parseFloat(document.getElementById('r').value)||0;
    let safi=w-k;
    document.getElementById('s').innerText=safi.toFixed(3);
    let tTolas=safi/G_FACTOR;
    updateTMR(tTolas);
    let p=Math.round(tTolas*r);
    document.getElementById('total').value=p;
    document.getElementById('totalUrdu').innerText=amountToUrdu(p);
    pulseTotal();
}
function calcByTMR() {
    let t=parseInt(document.getElementById('inT').value)||0,
        m=parseInt(document.getElementById('inM').value)||0,
        r=parseInt(document.getElementById('inR').value)||0,
        rate=parseFloat(document.getElementById('r').value)||0;
    let tot=t+(m/12)+(r/96), g=tot*G_FACTOR;
    document.getElementById('w').value=g.toFixed(3);
    document.getElementById('s').innerText=g.toFixed(3);
    let p=Math.round(tot*rate);
    document.getElementById('total').value=p;
    document.getElementById('totalUrdu').innerText=amountToUrdu(p);
    pulseTotal();
}
function calcByPrice() {
    let p=parseFloat(document.getElementById('total').value)||0,
        r=parseFloat(document.getElementById('r').value)||0;
    document.getElementById('totalUrdu').innerText=amountToUrdu(p);
    if (r>0) {
        let tot=p/r, g=tot*G_FACTOR;
        document.getElementById('w').value=g.toFixed(3);
        document.getElementById('s').innerText=g.toFixed(3);
        updateTMR(tot);
    }
    pulseTotal();
}

// â”€â”€â”€ Print: sync print meta then window.print â”€â”€â”€
function doPrint() {
    // sync print-only meta row
    document.getElementById('printDt').innerText =
        document.getElementById('dt').innerText + '  ' +
        document.getElementById('tm').innerText;
    document.getElementById('printInv').innerText =
        document.getElementById('invNum').value;
    window.print();
}

// â”€â”€â”€ Clock â”€â”€â”€
function setClock() {
    const n=new Date();
    const mo=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
    document.getElementById('dt').innerText=n.getDate()+'-'+mo[n.getMonth()]+'-'+n.getFullYear();
    document.getElementById('tm').innerText=n.toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'});
}
setInterval(setClock,1000); setClock();

// â”€â”€â”€ Invoice â”€â”€â”€
document.getElementById('invNum').value = Math.floor(Math.random()*90000)+10000;
</script>
</body>
</html>